<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í–∏–∑—É–∞–ª–∏–∑–∞—Ç–æ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤</title>
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —à—Ä–∏—Ñ—Ç–∞ Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —Å–ª–∞–π–¥–µ—Ä–∞ */
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: #3b82f6; /* blue-500 */
            cursor: pointer;
            border-radius: 50%;
            margin-top: -6px;
        }
        input[type=range]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: #3b82f6;
            cursor: pointer;
            border-radius: 50%;
        }
         /* –°—Ç–∏–ª–∏ –¥–ª—è date input –≤ —Ç–µ–º–Ω–æ–π —Ç–µ–º–µ */
        input[type="date"] {
            color-scheme: dark;
        }
    </style>
</head>
<body class="bg-gray-900 text-white flex items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-2xl bg-gray-800 rounded-2xl shadow-2xl p-8 space-y-8 border border-gray-700">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <div>
            <h1 class="text-3xl font-bold text-center text-blue-400">–ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –ª–∏–º–∏—Ç–æ–≤</h1>
            <p class="text-center text-gray-400 mt-2">–û—Ü–µ–Ω–∏—Ç–µ —Å–≤–æ–π —Ç–µ–º–ø —Ä–∞—Å—Ö–æ–¥–∞ —Ç–æ–∫–µ–Ω–æ–≤ –≤ —Ç–µ—á–µ–Ω–∏–µ –º–µ—Å—è—Ü–∞.</p>
        </div>

        <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
            <!-- –í—ã–±–æ—Ä –¥–∞—Ç—ã -->
            <div class="space-y-2">
                <label for="date-picker" class="block text-sm font-medium text-gray-300">–í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É</label>
                <input type="date" id="date-picker" class="w-full bg-gray-700 border border-gray-600 rounded-lg p-2.5 text-white focus:ring-blue-500 focus:border-blue-500 transition">
            </div>
            <!-- –°–ª–∞–π–¥–µ—Ä —Ç–æ–∫–µ–Ω–æ–≤ -->
            <div class="space-y-2">
                <div class="flex justify-between items-center">
                    <label for="tokens-slider" class="block text-sm font-medium text-gray-300">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ —Ç–æ–∫–µ–Ω–æ–≤</tabel>
                    <span id="tokens-value" class="text-lg font-semibold text-blue-400">50%</span>
                </div>
                <input id="tokens-slider" type="range" min="0" max="100" value="50" class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer">
            </div>
        </div>

        <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä—ã -->
        <div class="space-y-6 pt-4">
            <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤ -->
            <div class="space-y-2">
                <div class="flex justify-between mb-1">
                    <span class="text-base font-medium text-gray-300">–†–∞—Å—Ö–æ–¥ —Ç–æ–∫–µ–Ω–æ–≤</span>
                    <span id="tokens-progress-text" class="text-sm font-medium text-gray-300">50%</span>
                </div>
                <div class="w-full bg-gray-700 rounded-full h-5">
                    <div id="tokens-progress" class="bg-blue-600 h-5 rounded-full text-center text-xs font-bold text-white flex items-center justify-center transition-all duration-300 ease-in-out" style="width: 50%;">
                        <span id="token-status-icon"></span>
                    </div>
                </div>
                 <p id="status-text" class="text-sm text-center mt-2 text-gray-400"></p>
            </div>

            <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä –ø—Ä–æ—à–µ–¥—à–∏—Ö –¥–Ω–µ–π -->
            <div class="space-y-2">
                <div class="flex justify-between mb-1">
                    <span class="text-base font-medium text-gray-300">–ü—Ä–æ—à–ª–æ –¥–Ω–µ–π –≤ –º–µ—Å—è—Ü–µ</span>
                    <span id="days-progress-text" class="text-sm font-medium text-gray-300">0%</span>
                </div>
                <div class="w-full bg-gray-700 rounded-full h-5">
                    <div id="days-progress" class="bg-gray-500 h-5 rounded-full transition-all duration-300 ease-in-out" style="width: 0%;"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // –ü–æ–ª—É—á–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã DOM
            const datePicker = document.getElementById('date-picker');
            const tokensSlider = document.getElementById('tokens-slider');
            const tokensValue = document.getElementById('tokens-value');

            const tokensProgress = document.getElementById('tokens-progress');
            const tokensProgressText = document.getElementById('tokens-progress-text');
            const tokenStatusIcon = document.getElementById('token-status-icon');
            const statusText = document.getElementById('status-text');

            const daysProgress = document.getElementById('days-progress');
            const daysProgressText = document.getElementById('days-progress-text');
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–π –¥–∞—Ç—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
            const setDefaultDate = () => {
                const today = new Date();
                // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –¥–∞—Ç—É –≤ YYYY-MM-DD
                const year = today.getFullYear();
                const month = String(today.getMonth() + 1).padStart(2, '0');
                const day = String(today.getDate()).padStart(2, '0');
                datePicker.value = `${year}-${month}-${day}`;
            };

            // –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
            const updateVisualization = () => {
                // 1. –ü–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ –∏–Ω–ø—É—Ç–æ–≤
                const selectedDateStr = datePicker.value;
                if (!selectedDateStr) return; // –í—ã—Ö–æ–¥–∏–º, –µ—Å–ª–∏ –¥–∞—Ç–∞ –Ω–µ –≤—ã–±—Ä–∞–Ω–∞
                
                // –î–æ–±–∞–≤–ª—è–µ–º –≤—Ä–µ–º—è, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º —Å —á–∞—Å–æ–≤—ã–º–∏ –ø–æ—è—Å–∞–º–∏
                const selectedDate = new Date(selectedDateStr + 'T00:00:00');
                const tokensUsedPercent = parseInt(tokensSlider.value);

                // 2. –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –ø—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–æ—à–µ–¥—à–∏—Ö –¥–Ω–µ–π
                const dayOfMonth = selectedDate.getDate();
                const year = selectedDate.getFullYear();
                const month = selectedDate.getMonth();
                const daysInMonth = new Date(year, month + 1, 0).getDate();
                const daysElapsedPercent = (dayOfMonth / daysInMonth) * 100;

                // 3. –û–±–Ω–æ–≤–ª—è–µ–º UI
                // –°–ª–∞–π–¥–µ—Ä
                tokensValue.textContent = `${tokensUsedPercent}%`;

                // –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä —Ç–æ–∫–µ–Ω–æ–≤
                tokensProgress.style.width = `${tokensUsedPercent}%`;
                tokensProgressText.textContent = `${tokensUsedPercent}%`;

                // –ü—Ä–æ–≥—Ä–µ—Å—Å –±–∞—Ä –¥–Ω–µ–π
                daysProgress.style.width = `${daysElapsedPercent.toFixed(0)}%`;
                daysProgressText.textContent = `${daysElapsedPercent.toFixed(0)}%`;
                
                // 4. –õ–æ–≥–∏–∫–∞ —Ü–≤–µ—Ç–∞ –∏ —Å—Ç–∞—Ç—É—Å–∞
                const colorClassesToRemove = ['bg-red-500', 'bg-green-500', 'bg-blue-500'];
                tokensProgress.classList.remove(...colorClassesToRemove);
                
                const difference = tokensUsedPercent - daysElapsedPercent;

                if (difference > 5) {
                    // –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞
                    tokensProgress.classList.add('bg-red-500');
                    tokenStatusIcon.textContent = '‚ö†Ô∏è';
                    statusText.textContent = '–í—ã —Ä–∞—Å—Ö–æ–¥—É–µ—Ç–µ —Ç–æ–∫–µ–Ω—ã –±—ã—Å—Ç—Ä–µ–µ, —á–µ–º –ø—Ä–æ—Ö–æ–¥–∏—Ç –º–µ—Å—è—Ü. –í–æ–∑–º–æ–∂–µ–Ω –ø–µ—Ä–µ—Ä–∞—Å—Ö–æ–¥.';
                    statusText.className = 'text-sm text-center mt-2 text-red-400';
                } else if (difference < -5) {
                    // –≠–∫–æ–Ω–æ–º–∏—è
                    tokensProgress.classList.add('bg-green-500');
                    tokenStatusIcon.textContent = '‚úÖ';
                    statusText.textContent = '–û—Ç–ª–∏—á–Ω—ã–π —Ç–µ–º–ø! –£ –≤–∞—Å –µ—Å—Ç—å –∑–∞–ø–∞—Å —Ç–æ–∫–µ–Ω–æ–≤.';
                    statusText.className = 'text-sm text-center mt-2 text-green-400';
                } else {
                    // –í —Ä–∞–º–∫–∞—Ö –Ω–æ—Ä–º—ã
                    tokensProgress.classList.add('bg-blue-500');
                    tokenStatusIcon.textContent = 'üëç';
                    statusText.textContent = '–í—ã –∏–¥–µ—Ç–µ —Ç–æ—á–Ω–æ –ø–æ –≥—Ä–∞—Ñ–∏–∫—É.';
                    statusText.className = 'text-sm text-center mt-2 text-blue-400';
                }
            };

            // –ù–∞–∑–Ω–∞—á–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
            datePicker.addEventListener('input', updateVisualization);
            tokensSlider.addEventListener('input', updateVisualization);

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            setDefaultDate();
            updateVisualization();
        });
    </script>

</body>
</html>
